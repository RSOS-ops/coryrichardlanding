<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cory Richard</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <style>
        html {
            margin:0;
            padding:0;
        }
        body {
            background-color: black;
            color: white; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding:0;
            font-family: 'Roboto', sans-serif;
        }
        #staticTextCanvas, #animationCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
        }
        #staticTextCanvas {
            z-index: 0;
        }
        #animationCanvas {
            z-index: 1;
        }
        h1 {
            font-size: 4em; 
            margin-bottom: 20px;
            text-align: center;
            position: relative; /* Ensure z-index applies */
            z-index: 2; /* Above canvases */
        }
        div > ul[data-time] {
            display: none;
        }
        #sections-container {
            display: flex;
            justify-content: space-around;
            width: 66%;
            margin-top: 20px;
        }
        .section {
            padding: 10px;
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div>
      <ul data-time="3000">
        <li data-hue="197" data-role="main-name">C</li>
        <li data-hue="0" data-role="main-name">O</li>
        <li data-hue="197" data-role="main-name">R</li>
        <li data-hue="197" data-role="main-name">Y</li>
        <li data-hue="45" data-role="main-name">R</li>
        <li data-hue="197" data-role="main-name">I</li>
        <li data-hue="0" data-role="main-name">C</li>
        <li data-hue="197" data-role="main-name">H</li>
        <li data-hue="197" data-role="main-name">A</li>
        <li data-hue="45" data-role="main-name">R</li>
        <li data-hue="197" data-role="main-name">D</li>
        <li data-hue="197" data-role="sections">DJ</li>
        <li data-hue="0" data-role="sections">Music</li>
        <li data-hue="197" data-role="sections">Visual</li>
        <li data-hue="45" data-role="sections">Tech</li>
      </ul>
    </div>
    <canvas id="staticTextCanvas"></canvas>
    <canvas id="animationCanvas"></canvas>
    <h1>Coming Soon</h1>
    <div id="sections-container" style="display: none;">
        <div class="section">DJ</div>
        <div class.section">Music</div>
        <div class="section">Visual</div>
        <div class="section">Tech</div>
    </div>
    <script>
document.addEventListener('DOMContentLoaded', () => { 
    const h1 = document.querySelector('h1');
    if (h1) {
        h1.textContent = 'SCRIPT BLOCK PARSED'; 
    }
});

// Global helper
const font = (size) => \`bold \${size}px Arial\`;
const color = (hsl, o) => { // Added color function just in case it's needed by simplified fill
    return \`hsla(\${hsl.h | 0}, \${hsl.s}%, \${hsl.l}%, \${o})\`;
};

class TextSparks
{
    constructor() {
        const h1Constructor = document.querySelector('h1');
        if(h1Constructor) h1Constructor.textContent = 'Constructor Entered';

        this.opa    = 0;
        this.tick   = 0;
        this.drawCB = null; 
        this.mask   = null; 
        
        this.canvas = window.document.querySelector('#animationCanvas'); 
        if (this.canvas && h1Constructor) {
            h1Constructor.textContent = 'AnimCanvas Query Done';
        } else if (h1Constructor) {
             h1Constructor.textContent = 'AnimCanvas Query FAILED';
        }
        
        if (this.canvas) this.engine = this.canvas.getContext('2d');
        
        this.staticCanvas = window.document.querySelector('#staticTextCanvas');
        if (this.staticCanvas && h1Constructor) {
            h1Constructor.textContent = 'StaticCanvas Query Done';
        } else if (h1Constructor && !this.canvas) { // If anim canvas failed, this is next check
             h1Constructor.textContent = 'StaticCanvas Query FAILED (Anim also)';
        } else if (h1Constructor) {
             h1Constructor.textContent = 'StaticCanvas Query FAILED (Anim OK)';
        }

        if (this.staticCanvas) this.staticEngine = this.staticCanvas.getContext('2d');

        if (h1Constructor) {
            if (this.canvas && this.staticCanvas) {
                h1Constructor.textContent = 'Both Canvases Queried';
                if (this.engine && this.staticEngine) {
                    h1Constructor.textContent = 'Both Contexts OK';
                } else if (this.engine) {
                    h1Constructor.textContent = 'Anim Context OK, Static Failed/Missing';
                } else if (this.staticEngine) {
                    h1Constructor.textContent = 'Static Context OK, Anim Failed/Missing';
                } else {
                    h1Constructor.textContent = 'Both Contexts Failed';
                }
            } else if (this.canvas) {
                 h1Constructor.textContent = 'AnimCanvas OK, StaticCanvas FAILED';
            } else if (this.staticCanvas) {
                 h1Constructor.textContent = 'StaticCanvas OK, AnimCanvas FAILED';
            } else {
                 h1Constructor.textContent = 'Both Canvases FAILED Query';
            }
        }

        this.maskTick   = 0; 
        this.nextMaskCb = null; //this.nextMask.bind(this); 
        this.maskCache  = []; 
        this.particleMap = new Map(); 
        
        if(h1Constructor && h1Constructor.textContent.includes('Context OK')) { // Only call resize if contexts look okay
             this.resize(); 
        } else if (h1Constructor) {
            // Update h1 if not calling resize to show where it stopped
            // h1Constructor.textContent += ' - Resize NOT Called'; // Avoid too much nesting
        }
    }

    buildStackCache() { /* Disabled */ }
    fetchData() { /* Disabled */ }
    buildTextMask(texts) { return []; /* Disabled */ }
    createNewParticle() { /* Disabled */ }
    prepareParticle(particle) { /* Disabled */ }
    drawParticle(particle) { /* Disabled */ }
    renderParticles() { /* Disabled */ }
    drawStatic() { /* Disabled */ }
    draw() { /* Disabled */ }
    fadeInMask() { /* Disabled */ }
    afterFadeIn() { /* Disabled */ }
    fadeOutMask() { /* Disabled */ }
    afterFadeOut() { /* Disabled */ }
    tickMask() { /* Disabled */ }
    nextMask() { /* Disabled */ }
    clear() { /* Disabled */ }

    randFromList(...rands) { 
        return rands.reduce((acc, rand) => acc + rand, 0) / rands.length;
    }

    resize() {
        const h1Resize = document.querySelector('h1');
        if(h1Resize) h1Resize.textContent = 'Resize Entered';

        this.width  = window.innerWidth;
        this.height = window.innerHeight;

        if (this.canvas) {
            this.canvas.setAttribute('width', this.width);
            this.canvas.setAttribute('height', this.height);
            if (this.engine) {
                this.engine.fillStyle = 'darkred'; 
                this.engine.fillRect(0, 0, this.width, this.height);
            } else if (h1Resize) {
                h1Resize.textContent = 'Resize: AnimEngine MISSING'; return;
            }
        } else if (h1Resize) {
            h1Resize.textContent = 'Resize: AnimCanvas MISSING'; return;
        }

        if (this.staticCanvas) {
            this.staticCanvas.setAttribute('width', this.width);
            this.staticCanvas.setAttribute('height', this.height);
            if (this.staticEngine) {
                this.staticEngine.fillStyle = 'darkblue'; 
                this.staticEngine.fillRect(0, 0, this.width, this.height);
            } else if (h1Resize) {
                h1Resize.textContent = 'Resize: StaticEngine MISSING'; return;
            }
        } else if (h1Resize) {
            h1Resize.textContent = 'Resize: StaticCanvas MISSING'; return;
        }
        
        if (h1Resize) {
            h1Resize.textContent = 'Resize Called - Canvases Colored?';
        }
    }

    run() { /* Disabled */ }
}

const a = new TextSparks();
// a.run(); // run() is disabled

</script>
</body>
</html>